<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Synchrony | Premium Blockchain Bridge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@700;800&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <span style="font-size: 24px;">◈</span> K-SYNCHRONY
            </div>

            <nav class="nav-group">
                <div class="nav-label">Documentation</div>
                <a href="javascript:void(0)" class="nav-item active"
                    onclick="showSection('overview', this)">Overview</a>
                <a href="javascript:void(0)" class="nav-item" onclick="showSection('api-reference', this)">API
                    Reference</a>
                <a href="javascript:void(0)" class="nav-item" onclick="showSection('webhooks', this)">Webhooks</a>
            </nav>

            <nav class="nav-group">
                <div class="nav-label">Resources</div>
                <a href="https://github.com/Aaditya1273/Terravex-GreenAI" target="_blank" class="nav-item">GitHub
                    Repository</a>
                <a href="javascript:void(0)" class="nav-item"
                    onclick="logToTerminal('Documentation coming soon...')">Discord Support</a>
            </nav>

            <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border);">
                <div class="nav-label">Status</div>
                <div class="status-pills">
                    <div class="pill success" id="backend-status">● Backend Live</div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Overview Section -->
            <div id="section-overview" class="tab-content active">
                <header class="doc-section">
                    <h1 class="doc-title">Bridge Infrastructure</h1>
                    <p class="doc-subtitle">High-performance programmable commerce engine connecting IoT devices to the
                        Kaspa blockchain.</p>

                    <div style="display: flex; gap: 16px;">
                        <button class="btn-shiny" onclick="testHealth()">Health Check</button>
                        <button class="btn-shiny" onclick="testTrigger()">Simulate Trigger</button>
                    </div>
                </header>

                <section class="doc-section" style="animation-delay: 0.2s;">
                    <h2>Quick Start</h2>
                    <p>Integrate your devices by pointing your request handler to our secure gateway. The infrastructure
                        handles anchoring and verification automatically.</p>

                    <div class="code-block">
                        <div style="color: #666; margin-bottom: 8px;">// Endpoint Architecture</div>
                        <div><span style="color: #4ade80;">POST</span> /api/trigger</div>
                    </div>

                    <div class="code-block">
                        <div style="color: #666; margin-bottom: 8px;">// Example Payload</div>
                        <pre style="margin: 0;">{
  "device": "door_main",
  "action": "unlock",
  "sensor": "pulse"
}</pre>
                    </div>
                </section>
            </div>

            <!-- API Reference Section -->
            <div id="section-api-reference" class="tab-content">
                <header class="doc-section">
                    <h1 class="doc-title">API Reference</h1>
                    <p class="doc-subtitle">Detailed documentation for all K-Synchrony endpoints.</p>
                </header>

                <section class="doc-section" style="animation-delay: 0.2s;">
                    <h3>POST /api/trigger</h3>
                    <p>The primary endpoint for Anchoring IoT events to the Kaspa blockchain.</p>

                    <div class="code-block">
                        <div style="color: #666; margin-bottom: 8px;">// CURL Example</div>
                        <pre style="margin: 0;">curl -X POST https://k-synchrony.vercel.app/api/trigger \
  -H "Content-Type: application/json" \
  -d '{"device":"esp32_01","action":"trigger"}'</pre>
                    </div>

                    <div style="margin-top: 24px;">
                        <h4>Request Fields</h4>
                        <table style="width: 100%; margin-top: 12px; border-collapse: collapse; font-size: 14px;">
                            <tr style="border-bottom: 1px solid var(--border);">
                                <th style="text-align: left; padding: 12px;">Field</th>
                                <th style="text-align: left; padding: 12px;">Type</th>
                                <th style="text-align: left; padding: 12px;">Description</th>
                            </tr>
                            <tr style="border-bottom: 1px solid var(--border);">
                                <td style="padding: 12px;">device</td>
                                <td style="padding: 12px;">string</td>
                                <td style="padding: 12px;">Unique ID of the IoT device</td>
                            </tr>
                            <tr style="border-bottom: 1px solid var(--border);">
                                <td style="padding: 12px;">action</td>
                                <td style="padding: 12px;">string</td>
                                <td style="padding: 12px;">Action performed (e.g., 'open', 'detect')</td>
                            </tr>
                        </table>
                    </div>
                </section>
            </div>

            <!-- Webhooks Section -->
            <div id="section-webhooks" class="tab-content">
                <header class="doc-section">
                    <h1 class="doc-title">Webhooks</h1>
                    <p class="doc-subtitle">Receive real-time notifications for blockchain confirmations.</p>
                </header>

                <section class="doc-section" style="animation-delay: 0.2s;">
                    <div
                        style="padding: 40px; border: 1px dashed var(--border); border-radius: 12px; text-align: center;">
                        <span style="font-size: 48px; opacity: 0.2;">⚓</span>
                        <h3 style="margin-top: 16px;">Coming Soon</h3>
                        <p style="color: var(--text-secondary);">Webhook integration is currently in private beta.</p>
                        <button class="btn-shiny" style="margin-top: 24px; font-size: 13px;">Request Access</button>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Live Terminal -->
    <div class="terminal" id="terminal">
        <div class="terminal-header" onclick="toggleTerminal()">
            <div class="terminal-dots">
                <div class="dot" style="background: #ff5f56;"></div>
                <div class="dot" style="background: #ffbd2e;"></div>
                <div class="dot" style="background: #27c93f;"></div>
            </div>
            <div style="font-size: 11px; font-weight: 600; opacity: 0.5; cursor: pointer;">LIVE_TERMINAL</div>
            <div style="font-size: 10px; opacity: 0.3;">Click to collapse</div>
        </div>
        <div class="terminal-content" id="terminal-content">
            <div class="line">Ready for transmission...</div>
        </div>
    </div>

    <script>
        function showSection(sectionId, element) {
            // Hide all sections
            document.querySelectorAll('.tab-content').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show target section
            document.getElementById('section-' + sectionId).classList.add('active');
            element.classList.add('active');

            logToTerminal(`Navigated to ${sectionId.replace('-', ' ').toUpperCase()}`);
        }

        function toggleTerminal() {
            const terminal = document.getElementById('terminal');
            const content = document.getElementById('terminal-content');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                terminal.style.height = '300px';
            } else {
                content.style.display = 'none';
                terminal.style.height = '40px';
            }
        }

        function logToTerminal(message, isResponse = false) {
            const terminal = document.getElementById('terminal-content');
            const div = document.createElement('div');
            div.className = isResponse ? 'line response' : 'line';

            const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
            div.innerHTML = `<span style="opacity: 0.4;">[${timestamp}]</span> ${message}`;

            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        async function testHealth() {
            logToTerminal('GET /api/health initiating...');

            try {
                const response = await fetch('/api/health');
                const data = await response.json();
                logToTerminal('Status: ' + data.status.toUpperCase(), true);
                logToTerminal(JSON.stringify(data, null, 2), true);
            } catch (error) {
                logToTerminal('Error: ' + error.message, true);
            }
        }

        async function testTrigger() {
            logToTerminal('POST /api/trigger initiating...');

            try {
                const response = await fetch('/api/trigger', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        device: 'door1',
                        action: 'open',
                        sensor: 'test'
                    })
                });
                const data = await response.json();
                logToTerminal('SUCCESS: Blockchain Anchor confirmed', true);
                logToTerminal(JSON.stringify(data, null, 2), true);
            } catch (error) {
                logToTerminal('Error: ' + error.message, true);
            }
        }

        // Entrance animation handler
        document.addEventListener('DOMContentLoaded', () => {
            logToTerminal('K-Synchrony Node initialized.');
            logToTerminal('Awaiting instructions.');
        });
    </script>
</body>

</html>